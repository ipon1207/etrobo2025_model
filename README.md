
# ETロボコン2025 UMLモデルリポジトリ

## チーム開発のためのastah & Git運用ガイド 📖

このリポジトリは、ETロボコン2025で設計するUMLモデルを、チームで効率よく開発・管理するためのものです。

astahで作成したモデルのXML（`.xml`）をGitでバージョン管理し、**設計の変更履歴を明確に残すこと**を目的とします。

### この管理方法のメリット ✨

- **設計の変更点がわかる**: `.asta`ファイルはバイナリ形式ですが、XML形式で出力することで、**「誰が」「いつ」「どこを」**変更したかがテキストで明確にわかります。
- **安全な並行作業**: Gitのブランチ機能を使うことで、他のメンバーの作業に影響を与えずに、安心して自分の設計作業を進められます。
- **レビューによる品質向上**: Pull Requestを通じて変更内容をチームでレビューすることで、設計の妥当性を高め、ミスを早期に発見できます。

### 準備するもの 🛠️

- **astah***: professional, community, UMLなど、お使いのエディション。
- **Git**: バージョン管理の必須ツール。公式サイトからインストールしてください。
- **Gitクライアント (推奨)**: SourceTreeやVS Code拡張機能など。GUIでGitの操作が視覚的にわかり、ブランチの流れを把握しやすくなります。
- **共有リポジトリ (GitHub)**: このリポジトリです。

---

## 開発フロー 🌿

コンフリクト（競合）を避けるため、**`main`ブランチを直接編集することは絶対に禁止**です。作業は必ずブランチを作成してから行います。

```
main
 │
 ├─ line_trace/usecase (作業ブランチ)
 │   │
 │   └─ (編集 → コミット → プッシュ)
 │
 └─ (Pull Request → レビュー → マージ) -> mainに統合
```

### ステップ1: 作業の開始（ブランチ作成）

`main`ブランチは常に安定したバージョンを保つための重要なブランチです。作業を始める前に、必ず`main`ブランチから自分の作業用のブランチを作成します。

```bash
# 1. mainブランチに移動する
git checkout main

# 2. リモートリポジトリの最新の状態をローカルに反映する
git pull origin main

# 3. 新しい作業ブランチを作成し、そのブランチに移動する
git checkout -b line_trace/usecase
```

**ブランチ名のルール (例):**
- `UML図の種類/機能名`: UML図の追加 (例: `usecase/line-trace`)
- `fix/修正内容`: 修正 (例: `fix/usecase-line_trace`)

### ステップ2: モデルの編集とXMLのエクスポート

1.  作成したブランチ上で、いつも通り `.asta` ファイルをastahで開いて編集します。
2.  編集が終わったら、**必ずXMLファイルにも変更を反映させます**。
    - astahメニュー: **[ツール] > [XML入出力] > [XMLプロジェクトファイル出力]**
    - `.asta` ファイルと同じ名前で、同じフォルダに保存（上書き）してください。

### ステップ3: 変更内容の保存（コミット & プッシュ）

エクスポートした `.xml` ファイルをコミットし、リモートリポジトリにプッシュします。

```bash
# 1. 変更したファイルをステージングする
git add line_trace.xml

# 2. 変更内容をコミットする (メッセージは分かりやすく)
git commit -m "add: ライントレースのユースケース図を追加"

# 3. リモートリポジトリにプッシュする
git push origin line_trace/usecase
```

> **Tip:** コミットメッセージの先頭に `feat:` `fix:` などを付けると、変更の種類が分かりやすくなります（[Conventional Commits](https://www.conventionalcommits.org/)）。

### ステップ4: Pull Requestの作成とレビュー

GitHub上で、**「`自分の作業ブランチ` → `main`ブランチ」**へのPull Request (PR) を作成します。

**PRで確認すること:**
- **変更の意図**: なぜこの変更が必要なのかをPRの説明に書く。
- **XMLの差分**: 意図しない変更が含まれていないか？命名規則は守られているか？設計として妥当か？
- **コンフリクトの有無**: `main`ブランチと競合していないか（GitHubが自動でチェックしてくれます）。

チームメンバーから承認（Approve）されたら、PRをマージして変更を `main` ブランチに反映させます。

### ステップ5: 後片付け（ブランチの削除）

マージが完了した作業ブランチは不要になるため、削除してリポジトリを綺麗に保ちます。

```bash
# ローカルのブランチを削除
git branch -d line_trace/usecase

# リモートのブランチを削除 (GitHubのPRマージ時に自動で削除する設定も可能)
git push origin --delete line_trace/usecase
```

---

### ⚠️ チームの掟：3つの絶対ルール ⚠️

1.  **`main`ブランチは直接編集しない！**
    -   作業は必ずブランチを切り、Pull Request経由でマージすること。

2.  **`.asta` と `.xml` は常にセットで更新！**
    -   `.asta` を編集したら、必ずXMLもエクスポートしてコミットすること。

3.  **XMLファイルは絶対に手で編集しない！**
    -   XMLは差分確認のためのファイルです。編集は必ずastahで行うこと。
